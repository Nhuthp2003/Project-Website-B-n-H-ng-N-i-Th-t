<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" 
	th:replace="~{/layout/index :: dynamic(~{::main})}">
<body>
    <main>
        <div class="container-fluid">
        	<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
		        <div id="toast" class="toast border-0 rounded-0" role="alert" aria-live="assertive" aria-atomic="true">
		            <div class="toast-header">
		                <strong class="me-auto">Arphor</strong>
		                <button type="button" class="btn border-0 shadow-none" data-bs-dismiss="toast" aria-label="Close">
	                        <iconify-icon icon="ph:x-thin" style="font-size: 28px;"></iconify-icon>
	                    </button>
		            </div>
		            <div class="toast-body">
		                <h1 class="fw-bold" style="font-size: 20px;">ADDED TO CART!</h1>
		                <div class="row">
		                    <div class="col">
		                        <a th:href="@{/cart/view}" class="btn w-100 rounded-0 text-white" style="background-color: #1e372f;">
		                            <h1 class="mt-2" style="font-size: 11px;">CHECKOUT</h1>
		                        </a>
		                    </div>
		                    <div class="col">
		                        <button class="btn w-100 rounded-0 border border-dark" data-bs-dismiss="toast" aria-label="Close">
		                            <h1 class="mt-2" style="font-size: 11px;">CONTINUE SHOPPING</h1>
		                        </button>
		                    </div>
		                </div>
		            </div>
		        </div>
		    </div>
            <div class="row mb-5">
                <div class="">
                    <h1 class="mt-5 ms-4 me-4 text-uppercase" style="font-family: 'Montserrat', sans-serif;">
                    	<th:block th:text="${title}"/>
                    </h1>
                    <hr class="text-secondary ms-4 me-4 mt-5">
                    <nav class="navbar navbar-expand-lg bg-body-tertiary">
                        <div class="container-fluid">
                            <span class="navbar-toggler border-0">
                                <h1 class="mt-2" style="font-size: 12px; font-family: 'Montserrat', sans-serif;">
                                   	<span th:text="${#lists.size(products)}"></span> pieces
                                </h1>
                            </span>
                            <div class="col-5">
                                <div class="collapse navbar-collapse">
                                    <div class="dropdown ms-1 me-1">
                                        <button class="btn border-0" type="button" data-bs-toggle="dropdown"
                                            aria-expanded="false"
                                            style="font-family: 'Montserrat', sans-serif; font-size: 12px; background-color: #edece8;">
                                            Price
                                            <iconify-icon icon="ph:caret-down-thin"
                                                style="font-size: 19px; height: 14px;"></iconify-icon>
                                        </button>
                                        <ul class="dropdown-menu border-0 p-3"
											style="font-family: 'Montserrat', sans-serif; font-size: 12px; box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px; width: 180px;">
											<li><a th:href="@{/price/less-than-500}"
												class="dropdown-item fcmn">Less Than $100</a></li>
											<li><a th:href="@{/price/500-1000}"
												class="dropdown-item fcmn">$100 to $200</a></li>
											<li><a th:href="@{/price/1000-3000}"
												class="dropdown-item fcmn">$200 to $300</a></li>
											<li><a th:href="@{/price/3000-5000}"
												class="dropdown-item fcmn">$300 to $500</a></li>
											<li><a th:href="@{/price/more-than-5000}"
												class="dropdown-item fcmn">More Than $500</a></li>
										</ul>
                                    </div>
                                    <div class="dropdown ms-1">
                                        <button class="btn border-0" type="button" data-bs-toggle="dropdown"
                                            aria-expanded="false"
                                            style="font-family: 'Montserrat', sans-serif; font-size: 12px; background-color: #edece8;">
                                            Department
                                            <iconify-icon icon="ph:caret-down-thin"
                                                style="font-size: 19px; height: 14px;"></iconify-icon>
                                        </button>
                                        <ul class="dropdown-menu border-0 p-3"
											style="font-family: 'Montserrat', sans-serif; font-size: 12px; box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px; width: 180px;">
											<li><a th:href="@{/product/list(parentName=${parent.parentName})}" class="dropdown-item fcmn" th:each="parent : ${parents}" th:text="${parent.parentName}"></a></li>
										</ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="collapse navbar-collapse justify-content-center">
                                    <h1 class="mt-2" style="font-size: 12px; font-family: 'Montserrat', sans-serif;">
                                    	<span th:text="${#lists.size(products)}"></span> pieces
                                    </h1>
                                </div>
                            </div>
                            <div class="col-lg-5 d-flex align-items-end flex-column">
                                <div class="collapse navbar-collapse">
                                    <h1 class="mt-2 me-2"
                                        style="font-size: 12px; font-family: 'Montserrat', sans-serif;">Sort by</h1>
                                    <div class="dropdown hvdr ms-2 me-1">
                                        <button class="btn border-0" type="button" data-bs-toggle="dropdown"
                                            style="font-family: 'Montserrat', sans-serif; font-size: 12px; background-color: #edece8;">
                                            Featured
                                            <iconify-icon icon="ph:caret-down-thin"
                                                style="font-size: 19px; height: 14px;"></iconify-icon>
                                        </button>
                                        <ul
											class="dropdown-menu hvdrmn dropdown-menu-end border-0 p-3"
											style="font-family: 'Montserrat', sans-serif; font-size: 12px; box-shadow: rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px;">
											<li><a class="dropdown-item fcmn"
												th:href="@{/name/name-A-to-Z}">Name: A - Z</a></li>
											<li><a class="dropdown-item fcmn"
												th:href="@{/name/name-Z-to-A}">Name: Z - A</a></li>
											<li><a class="dropdown-item fcmn"
												th:href="@{/price/low-to-high}">Price: Low to High</a></li>
											<li><a class="dropdown-item fcmn"
												th:href="@{/price/high-to-low}">Price: High to Low</a></li>
										</ul>
                                    </div>
                                </div>
                            </div>
                            <button class="navbar-toggler shadow-none rounded-0 me-2 p-1" type="button"
                                data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
                                aria-controls="offcanvasRight" aria-expanded="false" aria-label="Toggle navigation">
                                <iconify-icon icon="circum:filter" style="font-size: 24px;"></iconify-icon>
                            </button>
                        </div>
                    </nav>
                    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"
                        aria-labelledby="offcanvasRightLabel">
                        <div class="offcanvas-header">
                            <h5 class="offcanvas-title" id="offcanvasRightLabel"
                                style="font-family: 'Montserrat', sans-serif;">FILTER & SORT</h5>
                            <button type="button" class="btn border-0 shadow-none" data-bs-dismiss="offcanvas"
                                aria-label="Close">
                                <iconify-icon icon="ph:x-thin" style="font-size: 34px;"></iconify-icon>
                            </button>
                        </div>
                        <div class="offcanvas-body">
                            <div class="accordion" id="accordionExample" style="font-family: 'Montserrat', sans-serif;">
                                <div class="accordion-item rounded-0">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed shadow-none" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                            aria-expanded="false" aria-controls="collapseThree">
                                            Price
                                        </button>
                                    </h2>
                                    <div id="collapseThree" class="accordion-collapse collapse show"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                        	<a th:href="@{/price/less-than-500}"
													class="dropdown-item">Less Than $500</a>
											<a th:href="@{/price/500-1000}"
													class="dropdown-item">$500 to $1000</a>
											<a th:href="@{/price/1000-3000}"
													class="dropdown-item">$1000 to $3000</a>
											<a th:href="@{/price/3000-5000}"
													class="dropdown-item">$3000 to $5000</a>
											<a th:href="@{/price/more-than-5000}"
													class="dropdown-item">More Than $5000</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item rounded-0">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed shadow-none" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFour"
                                            aria-expanded="false" aria-controls="collapseFour">
                                            Department
                                        </button>
                                    </h2>
                                    <div id="collapseFour" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="form-check">
                                                <input class="form-check-input rounded-0 shadow-none" type="checkbox"
                                                    value="" id="checkbox23" style="transform: scale(1.5);">
                                                <label class="form-check-label ms-2" for="checkbox23">
                                                    Bedroom
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input rounded-0 shadow-none" type="checkbox"
                                                    value="" id="checkbox24" style="transform: scale(1.5);">
                                                <label class="form-check-label ms-2" for="checkbox24">
                                                    Decor
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input rounded-0 shadow-none" type="checkbox"
                                                    value="" id="checkbox25" style="transform: scale(1.5);">
                                                <label class="form-check-label ms-2" for="checkbox25">
                                                    Dining
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input rounded-0 shadow-none" type="checkbox"
                                                    value="" id="checkbox26" style="transform: scale(1.5);">
                                                <label class="form-check-label ms-2" for="checkbox26">
                                                    Lighting
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input rounded-0 shadow-none" type="checkbox"
                                                    value="" id="checkbox27" style="transform: scale(1.5);">
                                                <label class="form-check-label ms-2" for="checkbox27">
                                                    Living
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item rounded-0">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed shadow-none" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFive"
                                            aria-expanded="false" aria-controls="collapseFive">
                                            Featured
                                        </button>
                                    </h2>
                                    <div id="collapseFive" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <a th:href="@{/name/name-A-to-Z}" class="dropdown-item" href="#">Name: A - Z</a>
                                            <a th:href="@{/name/name-Z-to-A}" class="dropdown-item" href="#">Name: Z - A</a>
                                            <a th:href="@{/price/low-to-high}" class="dropdown-item" href="#">Price: Low to High</a>
                                            <a th:href="@{/price/high-to-low}" class="dropdown-item" href="#">Price: High to Low</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row mb-5">
                        <div th:each="product : ${products}" class="col-sm-4 mt-5 mb-5">
                            <div class="card hoverimg border-0 rounded-0">
                                <a th:href="@{/products/{productId}(productId=${product.productId})}">
                                	<div class="hover-image">
		                                <img th:src="@{|/image/product/${product.image.split(',')[0]}|}"
	                                        class="img-fluid rounded-3 static-image" alt="...">
	                                    <img th:src="@{|/image/product/${product.image.split(',')[2]}|}"
	                                        class="img-fluid rounded-3 hover-image" alt="...">
                                	</div>
                                    <div class="middle">
                                        <div class="d-flex">
                                        	<form class="d-flex">
	                                            <button th:attr="ng-click=@{|cart.add(${product.productId})|}" class="btn btn-light rounded-3 btn-lg me-1">
	                                                <iconify-icon class="mt-2" icon="ph:shopping-cart-thin"
	                                                    style="font-size: 24px;"></iconify-icon>
	                                            </button>
	                                            <button class="btn btn-light rounded-3 btn-lg ms-1 me-1" 
	                                            	th:data-bs-toggle="modal" th:data-bs-target="'#product-detail-' + ${product.productId}">
	                                                <iconify-icon class="mt-2" icon="ph:magnifying-glass-thin"
	                                                    style="font-size: 24px;"></iconify-icon>
	                                            </button>                                        		
                                        	</form>
                                            <form th:action="@{/favourite/add}" method="post">
						                        <input type="hidden" name="productId" th:value="${product.productId}" />
						                        <button type="submit" class="btn btn-light rounded-3 btn-lg ms-1">
						                            <iconify-icon class="mt-2" icon="ph:heart-thin"
						                                style="font-size: 24px;"></iconify-icon>
						                        </button>
						                    </form>
                                        </div>
                                    </div>
                                </a>
                                <div class="card-body" style="font-family: 'Montserrat', sans-serif;">
                                    <div class="row">
                                        <div class="col-7">
                                            <a th:href="@{/products/{productId}(productId=${product.productId})}" class="text-decoration-none" href="#">
                                                <h1 class="card-title text-dark text-truncate" style="font-size: 14px;">
                                                	<th:text th:text="${product.productName}"/>
                                                </h1>
                                            </a>
                                        </div>
                                        <div class="col">
                                            <h1 class="card-title text-end" style="font-size: 14px;">
                                                <span class="text-danger">
                                                	$<th:text th:text="${product.price}"/>
                                                </span>
                                                <th:block th:with="newPrice=${product.price + (product.price * 0.797)}">
												    <span class="text-secondary text-decoration-line-through" th:text="'$' + ${newPrice}"></span>
												</th:block>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal -->
                        <div class="modal fade" th:each="product : ${products}" th:id="'product-detail-' + ${product.productId}">
                            <div class="modal-dialog modal-xl">
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn border-0 shadow-none" data-bs-dismiss="modal"
                                        aria-label="Close">
                                        <iconify-icon class="text-white" icon="ph:x-thin"
                                            style="font-size: 34px;"></iconify-icon></button>
                                </div>
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-lg">
                                                <div id="carouselExample" class="carousel slide carousel-fade">
							                        <div class="carousel-inner">
							                            <div class="carousel-item active">
							                                <img th:src="@{|/image/product/${product.image.split(',')[0]}|}"
							                                    class="d-block w-100" alt="...">
							                            </div>
							                            <div class="carousel-item">
							                                <img th:src="@{|/image/product/${product.image.split(',')[1]}|}"
							                                    class="d-block w-100" alt="...">
							                            </div>
							                            <div class="carousel-item">
							                                <img th:src="@{|/image/product/${product.image.split(',')[2]}|}"
							                                    class="d-block w-100" alt="...">
							                            </div>
							                        </div>
							                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
							                            data-bs-slide="prev">
							                            <iconify-icon icon="ph:arrow-circle-left-thin" style="font-size: 50px;"></iconify-icon>
							                            <span class="visually-hidden">Previous</span>
							                        </button>
							                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample"
							                            data-bs-slide="next">
							                            <iconify-icon icon="ph:arrow-circle-right-thin" style="font-size: 50px;"></iconify-icon>
							                            <span class="visually-hidden">Next</span>
							                        </button>
							                    </div>
                                            </div>
                                            <div class="col">
                                                <div class="card-body">
                                                    <h1 class="card-title"
                                                        style="font-size: 36px; font-family: 'Montserrat', sans-serif;">
                                                        <th:text th:text="${product.productName}"/>
                                                    </h1>
                                                    <h1 class="card-text mt-2"
                                                        style="font-size: 18px; font-family: 'Montserrat', sans-serif;">
                                                        <span class="text-danger">
                                                        	$<th:text th:text="${product.price}"/>
                                                        </span>
                                                        <th:block th:with="newPrice=${product.price + (product.price * 0.797)}">
														    <span class="text-secondary text-decoration-line-through" th:text="'$' + ${newPrice}"></span>
														</th:block>
                                                    </h1>
                                                    <hr class="text-secondary">
                                                    <p class="card-text">
                                                    	<small class="text-body-secondary">
                                                    		<th:text th:text="${product.description}"/>
                                                    	</small>
                                                    </p>
                                                    <div class="row">
                                                        <div class="col">
                                                            <input id="quantityInput"
                                                                class="form-control rounded-0 shadow-none h-100 border border-secondary"
                                                                type="number" min="1" max="10" value="1"
                                                                style="font-family: 'Montserrat', sans-serif;">
                                                        </div>
                                                        <div class="col-6">
                                                            <button th:attr="ng-click=@{|cart.add(${product.productId})|}" class="btn w-100 rounded-0 text-white h-100"
                                                                role="button"
                                                                style="font-family: 'Montserrat', sans-serif; background-color: #1e372f; box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;">
                                                                <h1 class="mt-2" style="font-size: 16px;">ADD TO CART
                                                                </h1>
                                                            </button>
                                                        </div>
                                                        <div class="col">
                                                            <form th:action="@{/favourite/add}" method="post">
										                        <input type="hidden" name="productId" th:value="${product.productId}" />
										                        <button type="submit" class="btn w-100 rounded-0 border border-secondary">
	                                                                <iconify-icon class="mt-2" icon="ph:heart-thin"
	                                                                    style="font-size: 24px;"></iconify-icon>
	                                                            </button>
										                    </form>
                                                        </div>
                                                    </div>
                                                    <hr class="text-secondary">
                                                    <h1 style="font-size: 13px;">SKU: <th:text th:text="${product.productId}"/></h1>
                                                    <h1 style="font-size: 13px;">Categories: <a th:href="@{/product/list(categoryId=${product.category.categoryID})}" class="text-secondary"><th:text th:text="${product.category.categoryName}"/></a>
                                                    </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>